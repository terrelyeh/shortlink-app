# Shortlink App å®Œæ•´å¯©æŸ¥å ±å‘Š

> åˆ†ææ—¥æœŸï¼š2026-02-17 | åˆ†æ”¯ï¼š`claude/repo-review-B300a`

---

## ä¸€ã€åŠŸèƒ½å®Œæˆåº¦ç¸½è¦½è¡¨

| # | åŠŸèƒ½æ¨¡çµ„ | å®Œæˆåº¦ | èªªæ˜ |
|---|---------|--------|------|
| 1 | çŸ­é€£çµå»ºç«‹ï¼ˆå–®ç­†ï¼‰ | âœ… 95% | è‡ªè¨‚/è‡ªå‹• codeã€UTMã€æ¨™ç±¤ã€Campaignã€éæœŸã€é»æ“Šä¸Šé™ |
| 2 | çŸ­é€£çµå»ºç«‹ï¼ˆæ‰¹æ¬¡ï¼‰ | âš ï¸ 80% | å¯æ‰¹æ¬¡å»ºç«‹ï¼Œä½†ç¼º transactionã€å¤±æ•—ç„¡å€‹åˆ¥éŒ¯èª¤å›å ± |
| 3 | çŸ­é€£çµç®¡ç† | âœ… 90% | CRUDã€è»Ÿåˆªé™¤ã€ç‹€æ…‹åˆ‡æ›ã€Cloneã€Preview |
| 4 | æ‰¹æ¬¡æ“ä½œ | âœ… 90% | åˆªé™¤/æš«åœ/å•Ÿç”¨/å°å­˜ï¼Œä¸Šé™ 100 ç­† |
| 5 | æ¨™ç±¤ç³»çµ± | âš ï¸ 75% | å»ºç«‹/ç¯©é¸å¯ç”¨ï¼Œä½†æœª workspace éš”é›¢ï¼Œç„¡é¡è‰²è‡ªè¨‚ UI |
| 6 | Campaign ç®¡ç† | âœ… 85% | CRUDã€èˆ‡é€£çµé—œè¯ã€çµ±è¨ˆï¼Œä½†ç¼º workspace ç¯„åœé™åˆ¶ |
| 7 | UTM ç¯„æœ¬ | âš ï¸ 70% | CRUD å¯ç”¨ï¼Œä»ç”¨å·²æ£„ç”¨çš„ userIdï¼Œæœª workspace åŒ– |
| 8 | Analytics å„€è¡¨æ¿ | âš ï¸ 75% | é»æ“Šè¶¨å‹¢ã€è£ç½®/ç€è¦½å™¨/OSã€Referrerã€UTM åˆ†æé½Šå…¨ï¼›ç¼º GeoIPã€ç„¡å¿«å– |
| 9 | CSV åŒ¯å‡º | âœ… 90% | é€£çµ + Analytics åŒ¯å‡ºæ­£å¸¸ |
| 10 | QR Code | âœ… 85% | PNG/SVG åŒ¯å‡ºã€å“ç‰ŒåŒ–ï¼ˆLogo æ’æ§½ã€Error Correction Hï¼‰ |
| 11 | çŸ­é€£çµé‡å° | âœ… 90% | Bot åµæ¸¬ã€é»æ“Šå»é‡ï¼ˆ10sï¼‰ã€Rate Limit 100/min |
| 12 | é©—è­‰/ç™»å…¥ | âš ï¸ 70% | Google OAuth onlyï¼ŒNextAuth 5 betaï¼Œç¼ºå…¶ä»– provider |
| 13 | è§’è‰²æ¬Šé™ | âœ… 85% | ADMIN/MANAGER/MEMBER/VIEWERï¼ŒAPI å±¤æœ‰æª¢æŸ¥ |
| 14 | Workspace | âš ï¸ 60% | Model å®Œæ•´ã€CRUD å¯ç”¨ï¼Œä½†å¤šæ•¸ API æœªæŒ‰ workspace éæ¿¾ |
| 15 | Workspace é‚€è«‹ | âŒ 40% | DB + API å®Œæˆï¼Œ**ä½† Email æœªå¯¦ä½œ**ï¼ˆåŠŸèƒ½ä¸å¯ç”¨ï¼‰ |
| 16 | åˆ†äº«å ±å‘Š | âš ï¸ 75% | Token + å¯†ç¢¼ + è§€çœ‹æ¬¡æ•¸é™åˆ¶ï¼Œä½†å¯†ç¢¼é©—è­‰ç„¡ Rate Limit |
| 17 | ç¨½æ ¸æ—¥èªŒ | âœ… 90% | æ‰€æœ‰ CRUD æ“ä½œéƒ½æœ‰è¨˜éŒ„ï¼Œåˆ†é /ç¯©é¸å¯ç”¨ |
| 18 | i18n åœ‹éš›åŒ– | âœ… 90% | en + zh-TW 300+ keysï¼Œå°‘æ•¸å…ƒä»¶æœ‰ hardcoded å­—ä¸² |
| 19 | RWD éŸ¿æ‡‰å¼ | âœ… 85% | Mobile sidebarã€responsive gridï¼Œtablet å¯å†å„ªåŒ– |
| 20 | ä½¿ç”¨è€…ç®¡ç† | âœ… 85% | åˆ—è¡¨/è§’è‰²è®Šæ›´/åˆªé™¤ï¼ˆADMIN onlyï¼‰ |
| 21 | æ¸¬è©¦ | âŒ 0% | ç„¡ä»»ä½•æ¸¬è©¦æª”æ¡ˆ |
| 22 | éƒ¨ç½² | âš ï¸ 60% | Zeabur å¯ç”¨ï¼Œä½† start script ç”¨ `db push`ï¼ˆæ‡‰æ”¹ migrate deployï¼‰ |

---

## äºŒã€åŠŸèƒ½å»ºè­°ï¼ˆ18 é …ï¼‰

### é«˜å„ªå…ˆï¼ˆP0ï¼‰â€” å½±éŸ¿æ ¸å¿ƒæµç¨‹

| # | å»ºè­° | åŸå›  | å½±éŸ¿ç¯„åœ |
|---|------|------|---------|
| F1 | **å¯¦ä½œ Email ç™¼é€ï¼ˆé‚€è«‹ä¿¡ï¼‰** | Workspace é‚€è«‹åŠŸèƒ½å®Œå…¨ä¸å¯ç”¨ | é‚€è«‹æµç¨‹ |
| F2 | **æ–°å¢æ›´å¤š OAuth Provider** | åƒ… Google ç™»å…¥ï¼Œé™åˆ¶ä½¿ç”¨è€…ç¾¤ | ç™»å…¥é  |
| F3 | **Workspace ç¯„åœéæ¿¾** | é€£çµ/æ¨™ç±¤/Campaign/ç¯„æœ¬æœªæŒ‰ workspace éæ¿¾ | å…¨ç«™ API |
| F4 | **GeoIP åœ°ç†ä½ç½®è¿½è¹¤** | Analytics ç¼ºåœ‹å®¶/åŸå¸‚è³‡æ–™ | Analytics |

### ä¸­å„ªå…ˆï¼ˆP1ï¼‰â€” æå‡ä½¿ç”¨é«”é©—

| # | å»ºè­° | åŸå›  | å½±éŸ¿ç¯„åœ |
|---|------|------|---------|
| F5 | **Loading skeleton** | å¤šé é¢è¼‰å…¥æ™‚ç„¡éª¨æ¶å±ï¼Œé«”é©—å·® | Dashboard/Analytics/Links |
| F6 | **Toast é€šçŸ¥ç³»çµ±** | æ“ä½œæˆåŠŸ/å¤±æ•—ç„¡çµ±ä¸€å›é¥‹ | å…¨ç«™ |
| F7 | **ç¢ºèªå°è©±æ¡†ä¸€è‡´åŒ–** | éƒ¨åˆ†åˆªé™¤æ“ä½œç„¡ç¢ºèªã€è§’è‰²è®Šæ›´ç„¡ç¢ºèª | Links/Users/Templates |
| F8 | **æœå°‹ Debounce** | Links é æœå°‹æ¯æ¬¡æŒ‰éµéƒ½è§¸ç™¼ API | Links é  |
| F9 | **è‡ªè¨‚ç¶²åŸŸæ”¯æ´** | å°ˆæ¥­ç”¨é€”å¿…å‚™ | é‡å°/è¨­å®š |
| F10 | **é€²éš Analyticsï¼ˆæ¼æ–—/A-B Testï¼‰** | è¡ŒéŠ·åœ˜éšŠå¸¸è¦‹éœ€æ±‚ | Analytics |
| F11 | **æ‰¹æ¬¡åŒ¯å…¥ï¼ˆCSVï¼‰** | å¤§é‡å»ºç«‹é€£çµçš„åå‘åŠŸèƒ½ | Links |
| F12 | **å¯†ç¢¼è®Šæ›´/å¸³è™Ÿç®¡ç†** | Settings é å¹¾ä¹æ˜¯å”¯è®€çš„ | Settings |

### ä½å„ªå…ˆï¼ˆP2ï¼‰â€” éŒ¦ä¸Šæ·»èŠ±

| # | å»ºè­° | åŸå›  | å½±éŸ¿ç¯„åœ |
|---|------|------|---------|
| F13 | **Dark Mode** | i18n æœ‰ key ä½†æœªå¯¦ä½œ | å…¨ç«™ |
| F14 | **Webhook äº‹ä»¶é€šçŸ¥** | å…è¨±å¤–éƒ¨ç³»çµ±æ•´åˆ | API |
| F15 | **API Documentationï¼ˆOpenAPI/Swaggerï¼‰** | ç¬¬ä¸‰æ–¹æ•´åˆéœ€è¦ | æ–‡ä»¶ |
| F16 | **ç€è¦½å™¨æ“´å……åŠŸèƒ½** | å¿«é€Ÿå»ºç«‹çŸ­é€£çµ | æ–°ç”¢å“ |
| F17 | **ç¨½æ ¸æ—¥èªŒåŒ¯å‡º** | åˆè¦éœ€æ±‚ | Audit Log |
| F18 | **éµç›¤å°èˆª/ç„¡éšœç¤™å„ªåŒ–** | Dropdown/Modal ç¼º focus ç®¡ç† | å…¨ç«™å…ƒä»¶ |

---

## ä¸‰ã€æŠ€è¡“å»ºè­°ï¼ˆ8 é …ï¼‰

### T1. ğŸ”’ Share Token å¯†ç¢¼æš´åŠ›ç ´è§£é˜²è­·ï¼ˆP0 å®‰å…¨ï¼‰

**å•é¡Œ**ï¼š`/api/share/[token]` çš„å¯†ç¢¼é©—è­‰ç«¯é»ç„¡ Rate Limitï¼Œå¯æš´åŠ›ç ´è§£ã€‚ä¸”å¯†ç¢¼éŒ¯èª¤æ™‚ä¹Ÿéå¢ viewCountï¼Œå°è‡´è§€çœ‹é™åˆ¶å¯è¢«ç¹éã€‚

**å»ºè­°**ï¼š
- åŠ å…¥ Rate Limitï¼ˆ5 æ¬¡/åˆ†é˜ï¼‰
- å¯†ç¢¼é©—è­‰æˆåŠŸæ‰éå¢ viewCount

---

### T2. ğŸ”’ IP_HASH_SALT å¼·åˆ¶æª¢æŸ¥ï¼ˆP0 å®‰å…¨ï¼‰

**å•é¡Œ**ï¼šç’°å¢ƒè®Šæ•¸ `IP_HASH_SALT` ç¼ºå¤±æ™‚åƒ… console.warnï¼Œä¸æœƒä¸­æ–·ã€‚

**å»ºè­°**ï¼šProduction ç’°å¢ƒç¼ºå°‘æ™‚æ‡‰ç›´æ¥ throw errorï¼Œé˜»æ­¢å•Ÿå‹•ã€‚

---

### T3. âš¡ ä»¥ Redis å–ä»£ In-Memory Rate Limiterï¼ˆP1 æ•ˆèƒ½/å®‰å…¨ï¼‰

**å•é¡Œ**ï¼šç›®å‰ rate limiter å­˜åœ¨è¨˜æ†¶é«”ä¸­ï¼Œå¤šå¯¦ä¾‹éƒ¨ç½²æ™‚æ¯å°å„è‡ªè¨ˆç®—ï¼Œç­‰æ–¼ç„¡æ•ˆã€‚

**å»ºè­°**ï¼šæ”¹ç”¨ Redis sliding windowï¼Œæ‰€æœ‰å¯¦ä¾‹å…±äº«è¨ˆæ•¸ã€‚

---

### T4. âš¡ æ–°å¢ç¼ºå¤±çš„è³‡æ–™åº«ç´¢å¼•ï¼ˆP1 æ•ˆèƒ½ï¼‰

**å»ºè­°æ–°å¢**ï¼š
```sql
CREATE INDEX idx_short_links_deleted_at ON short_links(deleted_at);
CREATE INDEX idx_short_links_workspace_status ON short_links(workspace_id, status);
CREATE INDEX idx_clicks_ip_hash ON clicks(ip_hash);
CREATE INDEX idx_audit_logs_action ON audit_logs(action);
CREATE INDEX idx_campaigns_status ON campaigns(status);
CREATE INDEX idx_tags_name ON tags(name);
```

---

### T5. ğŸ—ï¸ æ”¹ç”¨ Prisma Migrate å–ä»£ db pushï¼ˆP0 éƒ¨ç½²ï¼‰

**å•é¡Œ**ï¼š`start` script ç”¨ `prisma db push` è‡ªå‹•åŒæ­¥ schemaï¼Œç„¡ç‰ˆæœ¬æ§åˆ¶ï¼Œproduction æœ‰è³‡æ–™éºå¤±é¢¨éšªã€‚

**å»ºè­°**ï¼š
- æ”¹ç”¨ `prisma migrate deploy`
- å°‡ migration æª”æ¡ˆç´å…¥ git ç‰ˆæœ¬æ§åˆ¶

---

### T6. ğŸ§¹ å®Œæˆ Workspace é·ç§»ï¼Œç§»é™¤ legacy userIdï¼ˆP1 æŠ€è¡“å‚µï¼‰

**å•é¡Œ**ï¼š`ShortLink` å’Œ `UTMTemplate` ä»ä¿ç•™å·²æ£„ç”¨çš„ `userId` æ¬„ä½ï¼Œéƒ¨åˆ† APIï¼ˆå¦‚ batch createã€templatesï¼‰ä»ä½¿ç”¨ã€‚

**å»ºè­°**ï¼šçµ±ä¸€æ”¹ç”¨ `createdById` + workspace é—œè¯ï¼Œç§»é™¤ legacy æ¬„ä½ã€‚

---

### T7. ğŸ§ª å»ºç«‹æ¸¬è©¦å¥—ä»¶ï¼ˆP1 å“è³ªï¼‰

**å•é¡Œ**ï¼šæ•´å€‹å°ˆæ¡ˆ 0 å€‹æ¸¬è©¦æª”æ¡ˆã€‚

**å»ºè­°æ¶æ§‹**ï¼š
```
tests/
  unit/        â†’ auth, rate-limit, shortcode ç”Ÿæˆ
  integration/ â†’ links CRUD, workspace æ¬Šé™, é‚€è«‹æµç¨‹
  e2e/         â†’ å®Œæ•´ä½¿ç”¨è€…æµç¨‹
```
ç›®æ¨™è¦†è“‹ç‡ >80%ã€‚

---

### T8. ğŸ“Š Error Tracking + Structured Loggingï¼ˆP2 å¯è§€æ¸¬æ€§ï¼‰

**å•é¡Œ**ï¼šåƒ…ç”¨ `console.error`ï¼Œç„¡çµæ§‹åŒ–æ—¥èªŒï¼Œç„¡éŒ¯èª¤è¿½è¹¤ã€‚

**å»ºè­°**ï¼š
- åŠ å…¥ Sentry é€²è¡Œ error tracking
- åŠ å…¥ pino é€²è¡Œ structured logging
- ç¡¬ç·¨ç¢¼çš„ magic number æŠ½ç‚º `constants.ts` è¨­å®šæª”

---

## å››ã€å„ªå…ˆé †åºç¸½è¦½

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  P0ï¼ˆç«‹å³ä¿®å¾©ï¼‰                                       â”‚
â”‚  T1 Share å¯†ç¢¼é˜²è­·  â”‚  T2 Salt å¼·åˆ¶  â”‚  T5 Migrate  â”‚
â”‚  F1 Email ç™¼é€      â”‚  F3 Workspace éæ¿¾             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  P1ï¼ˆæœ¬æœˆå®Œæˆï¼‰                                       â”‚
â”‚  T3 Redis Rate Limit â”‚ T4 DB Index â”‚ T6 é·ç§»æ¸…ç†     â”‚
â”‚  T7 æ¸¬è©¦å¥—ä»¶  â”‚ F2 OAuth â”‚ F4 GeoIP â”‚ F5 Loading    â”‚
â”‚  F6 Toast     â”‚ F7 ç¢ºèªå°è©±æ¡†  â”‚  F8 Debounce       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  P2ï¼ˆä¹‹å¾Œè¦åŠƒï¼‰                                       â”‚
â”‚  T8 Logging/Sentry â”‚ F9~F18 é€²éšåŠŸèƒ½                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## äº”ã€è©•åˆ†æ‘˜è¦

| ç¶­åº¦ | åˆ†æ•¸ | èªªæ˜ |
|------|------|------|
| åŠŸèƒ½å®Œæˆåº¦ | **7.5/10** | æ ¸å¿ƒåŠŸèƒ½é½Šå…¨ï¼ŒWorkspace/é‚€è«‹/GeoIP æœªå®Œæˆ |
| ç¨‹å¼ç¢¼å“è³ª | **7/10** | TypeScript + Zod é©—è­‰ä½³ï¼Œä½†æœ‰ type assertion hackã€é‡è¤‡ç¨‹å¼ç¢¼ |
| å®‰å…¨æ€§ | **6.5/10** | Auth + Audit ä½³ï¼ŒRate Limit ä¸è¶³ã€å¯†ç¢¼ç«¯é»è£¸éœ² |
| æ•ˆèƒ½ | **6/10** | ç„¡å¿«å–ã€In-memory rate limiterã€Analytics æŸ¥è©¢ä½æ•ˆ |
| æ¸¬è©¦ | **0/10** | ç„¡ä»»ä½•æ¸¬è©¦ |
| éƒ¨ç½²å°±ç·’ | **5/10** | db push é¢¨éšªã€ç„¡ error trackingã€ç„¡ monitoring |
| UI/UX | **8/10** | è¨­è¨ˆç¾è§€ã€RWD è‰¯å¥½ï¼Œç¼º loading state å’Œ toast |
| **ç¸½é«”** | **7/10** | è‰¯å¥½åŸºç¤ï¼Œéœ€åŠ å¼·å®‰å…¨ã€æ¸¬è©¦ã€æ•ˆèƒ½æ‰èƒ½ production ready |
